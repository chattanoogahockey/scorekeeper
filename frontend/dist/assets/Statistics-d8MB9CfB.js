import{j as e}from"./index-CRuzh1EF.js";import{b as c}from"./react-vendor-6tIi07-H.js";import{a as o}from"./ui-vendor-NIGUFBhG.js";class p{constructor(){this.apiBase=""}async fetchPlayerStats(a={}){try{const t=new URLSearchParams;a.division&&a.division!=="All"&&t.append("division",a.division),a.season&&a.season!=="All"&&t.append("season",a.season),a.year&&a.year!=="All"&&t.append("year",a.year),a.year==="2025"&&a.season==="Fall"&&t.append("minGamesPlayed","1"),(!a.year||a.year==="All")&&(!a.season||a.season==="All")&&t.append("rostered","true"),t.append("_t",Date.now().toString());const{data:i}=await o.get(`${this.apiBase}/api/player-stats?${t.toString()}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});let l=[];return i.data&&Array.isArray(i.data)?l=i.data:Array.isArray(i)?l=i:i.data?l=Array.isArray(i.data)?i.data:[]:i.value&&Array.isArray(i.value)&&(l=i.value),l}catch(t){throw console.error("Error fetching player stats:",t),new Error("Failed to load player statistics")}}async fetchTeamStats(a={}){try{const t=new URLSearchParams;a.division&&a.division!=="All"&&t.append("division",a.division),t.append("_t",Date.now().toString());const{data:s}=await o.get(`${this.apiBase}/api/team-stats?${t.toString()}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});let n=[];return Array.isArray(s)?n=s:s.data&&Array.isArray(s.data)?n=s.data:s.value&&Array.isArray(s.value)&&(n=s.value),n}catch(t){throw console.error("Error fetching team stats:",t),new Error("Failed to load team statistics")}}async fetchSeasonalData(a={}){try{const t=new URLSearchParams;a.division&&a.division!=="All"&&t.append("division",a.division),t.append("scope","historical"),t.append("_t",Date.now().toString());const{data:s}=await o.get(`${this.apiBase}/api/player-stats?${t.toString()}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});let n=[];return Array.isArray(s)?n=s:s.data&&Array.isArray(s.data)?n=s.data:s.value&&Array.isArray(s.value)&&(n=s.value),n}catch(t){return console.error("Error fetching seasonal data:",t),[]}}async fetchMeta(){try{const{data:a}=await o.get(`${this.apiBase}/api/games`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});let t=[];a.games&&Array.isArray(a.games)?t=a.games:Array.isArray(a)?t=a:a.value&&Array.isArray(a.value)&&(t=a.value);const s=[...new Set(t.map(l=>l.division).filter(Boolean))],n=["All","Fall","Winter"],i=["All",...[...new Set(t.map(l=>{if(l.season&&typeof l.season=="string"){const r=l.season.match(/^(\d{4})/);return r?r[1]:null}return null}).filter(Boolean))].sort().reverse()];return{divisions:s,seasons:n,years:i}}catch(a){return console.error("Error fetching metadata:",a),{divisions:["Gold","Silver","Bronze"],seasons:["All","Fall","Winter"],years:["All","2025","2024","2023"]}}}}const h=new p,w=()=>{const[d,a]=c.useState([]),[t,s]=c.useState(!0),[n,i]=c.useState(null);c.useEffect(()=>{l()},[]);const l=async()=>{try{s(!0),i(null);const r=await h.fetchTeamStats({season:"Fall",year:2025});a(r)}catch(r){console.error("Error fetching team stats:",r),i("Failed to load team statistics")}finally{s(!1)}};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-lg text-blue-900",children:"Loading team statistics..."})]})})}):n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 text-lg",children:n}),e.jsx("button",{onClick:l,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsx("h1",{className:"text-4xl font-bold text-center text-blue-900",children:"Fall 2025 Team Statistics"})}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-blue-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-blue-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Team"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Games"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Wins"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Losses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Win %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Goals For"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Goals Against"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Goal Diff"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-blue-200",children:d.length>0?d.map((r,x)=>e.jsxs("tr",{className:"hover:bg-blue-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:r.teamName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.gamesPlayed||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.wins||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.losses||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.winPercentage?`${(r.winPercentage*100).toFixed(1)}%`:"0.0%"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.goalsFor||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.goalsAgainst||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-700",children:r.goalDifferential||0})]},r.teamName||x)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-blue-600",children:"No team statistics available for Fall 2025"})})})]})})})]})})};export{w as default};
